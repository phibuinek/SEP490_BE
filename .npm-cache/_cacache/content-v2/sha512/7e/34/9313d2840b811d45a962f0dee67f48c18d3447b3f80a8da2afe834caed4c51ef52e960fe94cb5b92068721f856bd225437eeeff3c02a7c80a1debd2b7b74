{"_id":"load-esm","_rev":"6-2a476a76c6e354b2ebe744bfc3baa0e8","name":"load-esm","dist-tags":{"latest":"1.0.3"},"versions":{"0.1.0":{"name":"load-esm","version":"0.1.0","keywords":["load-esm","ESM","CommonJS","TypeScript","Node.js","dynamic import","JavaScript modules","module interoperability","mixed-module environment"],"author":{"url":"https://github.com/Borewit","name":"Borewit"},"license":"MIT","_id":"load-esm@0.1.0","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"homepage":"https://github.com/Borewit/load-esm#readme","bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"dist":{"shasum":"f4901c37d51fdb93618977fb83ae2a9acd5cfdbc","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-0.1.0.tgz","fileCount":5,"integrity":"sha512-9wBLOJHfeAXEHUbp7OqU5N3kqaLYnIwuW9GXH3mpvUDYL+3aO/WFUNLmS+sqsdt/B9IF1j+Z4YI6VwfEQs7wRA==","signatures":[{"sig":"MEQCIEjRISC+LexmhykjChzKvz0iH5NTe1XV4VZ+HGi3bCWUAiAmTv6ig4ayaD2rWDWUSjHwxj6gcDeTDJz0vFUiaEsQfw==","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":4426},"main":"index.cjs","types":"index.d.ts","engines":{"node":">=13.2.0"},"funding":[{"url":"https://github.com/sponsors/Borewit","type":"github"},{"url":"https://buymeacoffee.com/borewit","type":"buymeacoffee"}],"gitHead":"029f62d5d9af00bbb4ad916e7af6b4e9d6c2c32e","_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"repository":{"url":"git+https://github.com/Borewit/load-esm.git","type":"git"},"_npmVersion":"10.9.0","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","directories":{},"_nodeVersion":"22.11.0","dependencies":{},"_hasShrinkwrap":false,"_npmOperationalInternal":{"tmp":"tmp/load-esm_0.1.0_1733740115304_0.32793554409017633","host":"s3://npm-registry-packages-npm-production"}},"0.1.1":{"name":"load-esm","version":"0.1.1","keywords":["load-esm","ESM","Import ESM","CommonJS","TypeScript","Node.js","dynamic import","dynamic load"],"author":{"url":"https://github.com/Borewit","name":"Borewit"},"license":"MIT","_id":"load-esm@0.1.1","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"homepage":"https://github.com/Borewit/load-esm#readme","bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"dist":{"shasum":"af494802317907a1348379761370950e19e4877a","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-0.1.1.tgz","fileCount":5,"integrity":"sha512-/rPzWSnSSdFQgBC8JB6EsaJJjuGJBaBBVz936z5IEznL/XE1W0r95mpPoaNTG4+LotnjLLUhqXTUNhPHiuuOEQ==","signatures":[{"sig":"MEUCIQD6KzCSJ/T9QJ6DmEzBR6F4HrgWug5wSKsH8v8XxUHSDwIgLwCyrQ62n5gl5YWxPjYrV7xnS8qmcRQRrAivvRIffrA=","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":4806},"main":"index.cjs","types":"index.d.ts","engines":{"node":">=13.2.0"},"funding":[{"url":"https://github.com/sponsors/Borewit","type":"github"},{"url":"https://buymeacoffee.com/borewit","type":"buymeacoffee"}],"gitHead":"3c46d9ecb8dbbded6a7c7e1519064e4ba244c396","_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"repository":{"url":"git+https://github.com/Borewit/load-esm.git","type":"git"},"_npmVersion":"10.9.0","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","directories":{},"_nodeVersion":"22.11.0","dependencies":{},"_hasShrinkwrap":false,"_npmOperationalInternal":{"tmp":"tmp/load-esm_0.1.1_1733909474634_0.03204671686588534","host":"s3://npm-registry-packages-npm-production"}},"1.0.0":{"name":"load-esm","version":"1.0.0","keywords":["load-esm","ESM","Import ESM","CommonJS","TypeScript","Node.js","dynamic import","dynamic load","JavaScript modules","module interoperability","mixed-module environment","ERR_PACKAGE_PATH_NOT_EXPORTED","No \"exports\" main defined in"],"author":{"url":"https://github.com/Borewit","name":"Borewit"},"license":"MIT","_id":"load-esm@1.0.0","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"homepage":"https://github.com/Borewit/load-esm#readme","bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"dist":{"shasum":"ffeab57f68539a4e362d0015f52ef171b59174c2","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-1.0.0.tgz","fileCount":5,"integrity":"sha512-jD4w34DxugmOEVX+c0/mtoxMyrrDX+FrI8hvDfrOi4hmXGSBq6Qe7399d5vxaWHzX4xFN9JIIsam0uOAjJuIGg==","signatures":[{"sig":"MEQCIGMq69R81g5ImkbhRYrH0+PEu24IAKLo1/6rRQCriYo7AiB/L0Tszg+X4iD79ce2vUMLlQXjsSZ6IUozhh+4VQyxFA==","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":5220},"main":"index.cjs","types":"index.d.ts","engines":{"node":">=13.2.0"},"funding":[{"url":"https://github.com/sponsors/Borewit","type":"github"},{"url":"https://buymeacoffee.com/borewit","type":"buymeacoffee"}],"gitHead":"3bc88296b4ce9a9a8c8cc5096998ded03da6f177","_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"repository":{"url":"git+https://github.com/Borewit/load-esm.git","type":"git"},"_npmVersion":"10.8.2","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","directories":{},"_nodeVersion":"20.17.0","dependencies":{},"_hasShrinkwrap":false,"_npmOperationalInternal":{"tmp":"tmp/load-esm_1.0.0_1734051136752_0.49276990677455634","host":"s3://npm-registry-packages-npm-production"}},"1.0.1":{"name":"load-esm","version":"1.0.1","keywords":["load-esm","ESM","Import ESM","CommonJS","TypeScript","Node.js","dynamic import","dynamic load","JavaScript modules","module interoperability","mixed-module environment","ERR_PACKAGE_PATH_NOT_EXPORTED","No \"exports\" main defined in"],"author":{"url":"https://github.com/Borewit","name":"Borewit"},"license":"MIT","_id":"load-esm@1.0.1","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"homepage":"https://github.com/Borewit/load-esm#readme","bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"dist":{"shasum":"6ccd70a736e4a4d6296d488c365bd6afdf93b756","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-1.0.1.tgz","fileCount":5,"integrity":"sha512-wPOn7uGcpwq+Wu+iLKpqja3YCZEodF/wLp3puLZ3pzdh4QIOaMOXDHA3poPV1xvYFSy54QN3QKgHmwPD+iCcDQ==","signatures":[{"sig":"MEUCIFmg9BUsc4+x9MtHOZQ+L7YnmmylZJoEAz5ukUf1N/OhAiEA/W4x1nBjtCq5gBVbQVB6oan8Apza8UqlZSf8r4lRGQA=","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":5676},"main":"index.js","types":"index.d.ts","engines":{"node":">=13.2.0"},"funding":[{"url":"https://github.com/sponsors/Borewit","type":"github"},{"url":"https://buymeacoffee.com/borewit","type":"buymeacoffee"}],"gitHead":"4251f22aa4a3ee7a640d731a4a6c302ffadd970e","scripts":{"test":"mocha","compile-test":"tsc -p test"},"_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"repository":{"url":"git+https://github.com/Borewit/load-esm.git","type":"git"},"_npmVersion":"10.8.2","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","directories":{},"_nodeVersion":"20.17.0","_hasShrinkwrap":false,"devDependencies":{"chai":"^4.3.4","mocha":"^11.0.1","typescript":"^5.7.2","@types/chai":"^5.0.1","@types/node":"^22.10.2","@types/mocha":"^10.0.10"},"_npmOperationalInternal":{"tmp":"tmp/load-esm_1.0.1_1734555996119_0.8680346294276402","host":"s3://npm-registry-packages-npm-production"}},"1.0.2":{"name":"load-esm","version":"1.0.2","keywords":["load-esm","ESM","Import ESM","CommonJS","TypeScript","Node.js","dynamic import","dynamic load","JavaScript modules","module interoperability","mixed-module environment","ERR_REQUIRE_ESM","require() of ES Module","ERR_PACKAGE_PATH_NOT_EXPORTED","No \"exports\" main defined in"],"author":{"url":"https://github.com/Borewit","name":"Borewit"},"license":"MIT","_id":"load-esm@1.0.2","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"homepage":"https://github.com/Borewit/load-esm#readme","bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"dist":{"shasum":"35dbac8a1a3abdb802cf236008048fcc8a9289a6","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-1.0.2.tgz","fileCount":5,"integrity":"sha512-nVAvWk/jeyrWyXEAs84mpQCYccxRqgKY4OznLuJhJCa0XsPSfdOIr2zvBZEj3IHEHbX97jjscKRRV539bW0Gpw==","signatures":[{"sig":"MEQCIH04XaqOiaoLxa+MfcRj0tIzihgAQbvINN+QpY791iFTAiAWoKs6mPcN3jUV9n4kmDUOZMUQL69Muvh+A3HA5aYWhQ==","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":5929},"main":"index.js","types":"index.d.ts","engines":{"node":">=13.2.0"},"funding":[{"url":"https://github.com/sponsors/Borewit","type":"github"},{"url":"https://buymeacoffee.com/borewit","type":"buymeacoffee"}],"gitHead":"27696a447e06f827981df3383292be047d6b4faf","scripts":{"test":"mocha","compile-test":"tsc -p test"},"_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"repository":{"url":"git+https://github.com/Borewit/load-esm.git","type":"git"},"_npmVersion":"10.9.2","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","directories":{},"_nodeVersion":"22.13.0","_hasShrinkwrap":false,"devDependencies":{"chai":"^4.3.4","mocha":"^11.0.1","typescript":"^5.7.2","@types/chai":"^5.0.1","@types/node":"^22.10.2","@types/mocha":"^10.0.10"},"_npmOperationalInternal":{"tmp":"tmp/load-esm_1.0.2_1740737002094_0.26789791825024767","host":"s3://npm-registry-packages-npm-production"}},"1.0.3":{"name":"load-esm","version":"1.0.3","type":"commonjs","main":"index.js","types":"index.d.ts","scripts":{"test":"mocha","compile-test":"tsc -p test"},"author":{"name":"Borewit","url":"https://github.com/Borewit"},"funding":[{"type":"github","url":"https://github.com/sponsors/Borewit"},{"type":"buymeacoffee","url":"https://buymeacoffee.com/borewit"}],"license":"MIT","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","repository":{"type":"git","url":"git+https://github.com/Borewit/load-esm.git"},"bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"homepage":"https://github.com/Borewit/load-esm#readme","keywords":["load-esm","ESM","Import ESM","CJS","CommonJS","TypeScript","Node.js","dynamic import","dynamic module loading","dynamic load","JavaScript modules","CJS ESM interoperability","import ESM in CommonJS","typescript commonjs import esm","module interoperability","node esm loader","mixed module","dynamic esm import typescript","cjs to esm bridge","ERR_REQUIRE_ESM","require ESM error","ERR_PACKAGE_PATH_NOT_EXPORTED","No \"exports\" main defined in","exports not defined error"],"engines":{"node":">=13.2.0"},"devDependencies":{"@types/chai":"^5.0.1","@types/mocha":"^10.0.10","@types/node":"^22.10.2","chai":"^4.3.4","mocha":"^11.0.1","typescript":"^5.7.2"},"_id":"load-esm@1.0.3","gitHead":"d5623ec42643c93ec21c9f2ff295dc3d2915f6c9","_nodeVersion":"22.17.0","_npmVersion":"11.4.2","dist":{"integrity":"sha512-v5xlu8eHD1+6r8EHTg6hfmO97LN8ugKtiXcy5e6oN72iD2r6u0RPfLl6fxM+7Wnh2ZRq15o0russMst44WauPA==","shasum":"2073afe3da63902c323e80d9f135c301173ac92c","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-1.0.3.tgz","fileCount":5,"unpackedSize":6799,"signatures":[{"keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U","sig":"MEUCIC2vRiGaSrwfuhHljbC+kHpVgckFfNiR25wYc4Mp8PoXAiEAuDsdNRBr4LI9Lrtzry6gFdBUDuV1/KtFVq2qdyulIvE="}]},"_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"directories":{},"maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages-npm-production","tmp":"tmp/load-esm_1.0.3_1756037373447_0.21271931628791907"},"_hasShrinkwrap":false}},"time":{"created":"2024-12-09T10:28:35.231Z","modified":"2025-08-24T12:09:33.815Z","0.1.0":"2024-12-09T10:28:35.469Z","0.1.1":"2024-12-11T09:31:14.798Z","1.0.0":"2024-12-13T00:52:17.050Z","1.0.1":"2024-12-18T21:06:36.359Z","1.0.2":"2025-02-28T10:03:22.298Z","1.0.3":"2025-08-24T12:09:33.627Z"},"bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"author":{"name":"Borewit","url":"https://github.com/Borewit"},"license":"MIT","homepage":"https://github.com/Borewit/load-esm#readme","keywords":["load-esm","ESM","Import ESM","CJS","CommonJS","TypeScript","Node.js","dynamic import","dynamic module loading","dynamic load","JavaScript modules","CJS ESM interoperability","import ESM in CommonJS","typescript commonjs import esm","module interoperability","node esm loader","mixed module","dynamic esm import typescript","cjs to esm bridge","ERR_REQUIRE_ESM","require ESM error","ERR_PACKAGE_PATH_NOT_EXPORTED","No \"exports\" main defined in","exports not defined error"],"repository":{"type":"git","url":"git+https://github.com/Borewit/load-esm.git"},"description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"readme":"[![Node.js CI](https://github.com/Borewit/load-esm/actions/workflows/nodejs-ci.yml/badge.svg)](https://github.com/Borewit/load-esm/actions/workflows/nodejs-ci.yml)\n[![NPM version](https://img.shields.io/npm/v/load-esm.svg)](https://npmjs.org/package/load-esm)\n[![npm downloads](http://img.shields.io/npm/dm/load-esm.svg)](https://npmcharts.com/compare/load-esm?start=365)\n\n# load-esm\n\n**load-esm** is a tiny utility that lets CommonJS (CJS) TypeScript projects **dynamically import pure ESM packages** at runtime—without hacks like `eval()`.\n\nIt helps avoid errors like:\n\n* `Error [ERR_REQUIRE_ESM]: require() of ES Module`\n* `Error [ERR_PACKAGE_PATH_NOT_EXPORTED]: No \"exports\" main defined in ...`\n\n---\n\n## Installation\n\n```bash\nnpm install load-esm\n# or\nyarn add load-esm\n# or\npnpm add load-esm\n```\n\n> Works in CJS TypeScript projects. No config changes required.\n\n---\n\n## Quick start\n\n```ts\n// TypeScript (CJS project)\nimport { loadEsm } from \"load-esm\";\n\n(async () => {\n  const esmModule = await loadEsm(\"esm-module\");\n  // use esmModule...\n})();\n```\n\n### With typings\n\n```ts\nimport { loadEsm } from \"load-esm\";\n\n(async () => {\n  const esmModule = await loadEsm<typeof import(\"esm-module\")>(\"esm-module\");\n  // esmModule is fully typed\n})();\n```\n\n### Concrete example (pure ESM package)\n\n```ts\nimport { loadEsm } from \"load-esm\";\n\n(async () => {\n  try {\n    // Import a pure ESM package from a CommonJS TS project\n    const { fileTypeFromFile } = await loadEsm<typeof import(\"file-type\")>(\n      \"file-type\"\n    );\n\n    const type = await fileTypeFromFile(\"fixture.gif\");\n    console.log(type);\n  } catch (error) {\n    console.error(\"Error importing module:\", error);\n  }\n})();\n```\n\n> Note: Because top‑level `await` isn’t available in CommonJS, examples use an async IIFE.\n\n---\n\n## API\n\n```ts\nfunction loadEsm<T = unknown>(name: string): Promise<T>\n```\n\n**Parameters**\n\n* `name` — Package name or file path to import.\n\n**Returns**\n\n* `Promise<T>` resolving to the imported module namespace.\n\n---\n\n## How it works\n\nIn CJS TypeScript projects (`\"module\": \"commonjs\"`), the TS compiler transpiles dynamic `import()` to `require()`, which **breaks** when the target is a pure ESM package.\n\n`load-esm` executes the `import()` **outside of TypeScript’s transpilation scope**, preserving native dynamic `import()` semantics at runtime. This keeps your code type‑safe while avoiding brittle workarounds (e.g., wrapping `import()` in `eval()`).\n\n### What about Node.js ≥ 22.12?\n\nSince Node.js 22.12, `require` can load **some** ESM modules, but there are [documented constraints](https://nodejs.org/api/modules.html#loading-ecmascript-modules-using-require). If your dependencies are compatible with that path, you might not need this utility. `load-esm` remains useful when:\n\n* You’re on older Node.js versions that support `import()` (see Compatibility) but not the newer `require()` behavior.\n* You want a single, consistent pattern that works across environments and avoids edge cases.\n\n> If Node’s built‑in `require(esm)` works for your packages and version, feel free to use it.\n\n---\n\n## Compatibility\n\n* **Node.js**: ≥ 13.2.0 (first version with native `import()` support)\n* **TypeScript**: Fully typed; works in CJS projects.\n\n---\n\n## Troubleshooting\n\n* **`ERR_REQUIRE_ESM`**: Ensure you’re using `load-esm(...)` to import the ESM dependency from CJS code.\n* **`No \"exports\" main defined`**: Some packages only expose ESM entry points. Import them via `load-esm`.\n* **Type declarations**: Use the generic form `loadEsm<typeof import(\"pkg\")>(\"pkg\")` for typed access.\n* **Top‑level await**: Wrap usage in an async IIFE in CJS.\n\n---\n\n## License\n\n[MIT](./LICENSE.txt)\n\n---\n\n### Changelog\n\nSee [Releases](https://github.com/Borewit/load-esm/releases).\n\n---\n\n### Acknowledgements\n\nInspired by common pain points when mixing CJS projects with modern ESM‑only libraries.\n","readmeFilename":"README.md"}